```
@startuml

ユーザー -> webサーバー : ルート表示の操作
webサーバー -> DBサーバー : ルート取得要求
DBサーバー --> webサーバー : ルート送信
webサーバー --> ユーザー : ルート表示

opt チェックポイント到着時
ユーザー -> webサーバー : 写真送信
webサーバー -> DBサーバー : 写真保存and位置情報確認要求
DBサーバー -> DBサーバー : 位置情報とチェックポイントの一致確認

alt 不一致の場合
DBサーバー -> webサーバー : 確認結果（不一致）の送信
webサーバー -> ユーザー : 不一致警告ポップアップの表示

else 一致した場合
DBサーバー -> DBサーバー : 写真の保存
DBサーバー -> webサーバー : 確認結果（一致）の送信
webサーバー-> ユーザー : 一致確認ポップアップand実際に通ったルートの確認ポップアップ

alt 元のルートと異なる場合
webサーバー -> ユーザー : マ入力受付マップの表示
ユーザー -> webサーバー : 実際のルートの入力
webサーバー -> ユーザー : 次のチェックポイントのハイライト表示
webサーバー -> DBサーバー : 修正ルートの送信
DBサーバー -> DBサーバー : 修正ルートの保存
end
end

@enduml
```
