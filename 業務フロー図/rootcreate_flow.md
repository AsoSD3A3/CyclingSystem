```uml
@startuml
opt 自分でルートを作成するとき

ユーザー -> webサーバー : 通る道の入力
webサーバー --> ユーザー : 入力された道の表示

else 他人のルートを使用するとき

ユーザー -> webサーバー : 使用したいルートを掲示板から選ぶ
webサーバー -> DBサーバー : 選択されたルートの要求
DBサーバー --> webサーバー : 選択されたルートの送信
webサーバー --> ユーザー : 選択されたルートが反映されているマップの表示
end

opt 途中で作成を中断する場合

alt 別画面に映ろうとしたとき

ユーザー -> webサーバー : 画面移動
webサーバー --> ユーザー : 保存の要否のポップアップ

alt 保存しない場合

ユーザー -> webサーバー : 保存しないを押す
webサーバー --> DBサーバー : 遷移先ページの要求
DBサーバー --> webサーバー : 遷移先ページの送信
webサーバー --> ユーザー : 遷移先ページの表示


else 保存する場合

ユーザー -> webサーバー : 保存するを押す
webサーバー -> DBサーバー : 作成データの保存を要求and遷移先ページの要求
DBサーバー --> DBサーバー : 作成データの保存処理
DBサーバー --> webサーバー : 遷移先ページの送信
webサーバー --> ユーザー : 遷移先ページの表示

end

else 途中まででいったん中断する場合

ユーザー -> webサーバー : 中断ボタンを押す
webサーバー -> DBサーバー : データ保存要求and遷移先ページの要求
DBサーバー --> DBサーバー : データ保存処理
DBサーバー --> webサーバー : 遷移先ページの送信
webサーバー --> ユーザー : 作成ルート一覧ページに遷移

end

else 完成したルートを保存するとき

ユーザー -> webサーバー : 完成ボタンを押す
webサーバー -> DBサーバー : データ保存要求and遷移先ページの要求
DBサーバー --> DBサーバー : データ保存処理
DBサーバー --> webサーバー : 遷移先ページの送信
webサーバー --> ユーザー : 作成ルート一覧ページに遷移

end

@enduml
```
